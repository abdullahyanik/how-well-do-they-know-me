var user_questions={},username="";questions.length<question_limit&&(question_limit=questions.length);var question_index=1,question_answer_template=$("#questionAnswers").html().replace("display:none","");function answerQuestion(e,t,s){user_questions[question_index]={},user_questions[question_index][t]=s,questions.splice(e,1),question_index+=1,changeQuestion()}function createQuiz(){$("#step2").css("display","flex").hide().fadeIn(),$.post("./create-quiz",{username:username,questions:JSON.stringify(user_questions)},function(e){"object"!=typeof e&&(e=JSON.parse(e)),e.success&&setInterval(function(){window.location.href="./share/"+e.shortcode},500)})}function changeQuestion(){if(0<questions.length&&question_index-1!=question_limit){var e=Math.floor(Math.random()*questions.length),t=questions[e],s=JSON.parse(t.answers);$("#questionRange").text(question_index+"/"+question_limit),$("#questionText").text(t.text),$("#question").fadeIn(),$("#questionAnswers").html("");for(var n=0;n<s.length;n++){var i=question_answer_template.replace(":index",e+","+t.id+","+n).replace(":text",s[n].text);s[n].image&&(i=i.replace("display:none","").replace("data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=","assets/img/uploads/"+t.id+"-"+(n+1).toString()+".jpg")),$("#questionAnswers").append(i)}}else $("#question").fadeOut(),setTimeout(createQuiz,300)}$("#startForm").submit(function(e){e.preventDefault(),username=$("#userName").val(),$("#step1").fadeOut(300),setTimeout(changeQuestion,300)});